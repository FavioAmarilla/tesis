<app-breadcrumb [pagina]=pagina></app-breadcrumb>

<div class="row">
    <div class="col-md-12">
      
      <div class="card" *ngIf="!form">
        <div class="card-header">
          <button class="btn btn-primary pull-right" (click)="mostrarFormulario(true, 'INS', true)">Agregar</button>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table">
              <thead class=" text-primary">
                <th>
                  Descripcion
                </th>
                <th class="text-right">
                  Valor
                </th>
                <th class="text-right">
                  Opciones
                </th>
              </thead>
              <tbody>
                <tr *ngFor="let row of listaImpuesto | paginate: { itemsPerPage: porPagina, currentPage: paginaActual, totalItems: total }">
                  <td>
                    {{ row.descripcion }}
                  </td>
                  <td class="text-right">
                    {{ row.valor }}
                  </td>
                  <td class="text-right">
                    <button class="btn btn-sm btn-warning" (click)="obtenerImpuesto(row.identificador)"><i class="fas fa-edit"></i></button> &nbsp;
                  </td>
                </tr>
              </tbody>
            </table>
            <div *ngIf="!cargando && !form && accion == 'LST'">
              <app-paginacion (actualizarPagina)="paginacion($event)" [datos]="barrio" [porPagina]="porPagina" [total]="total"></app-paginacion>
            </div>
            <div class="row justify-content-center align-items-center col-md-12">
              <span *ngIf="cargando && !form && accion == 'LST'" class="spinner-border spinner-border-lg spinner-table" role="status" aria-hidden="true"></span>
            </div>
          </div>
        </div>
      </div>

      <div class="card" *ngIf="form">
        <div class="card-body">
          <div class="table-responsive">
            <form>
                <div class="form-group">
                  <label for="Descripcion">Descripcion</label>
                  <input type="text" class="form-control" placeholder="Descripcion" name="descripcion" [(ngModel)]="tipoImpuesto.descripcion">
                </div>
                <div class="form-group">
                  <label for="Valor">Valor</label>
                  <input type="text" class="form-control" placeholder="Valor" name="valor" [(ngModel)]="tipoImpuesto.valor">
                </div>
                <div class="form-group">
                  <button type="button" class="btn btn-success" (click)="registrar()" *ngIf="accion == 'INS'">
                      <span *ngIf="cargando && accion == 'INS'" class="spinner-border  spinner-border-sm" role="status" aria-hidden="true"></span>
                      Guardar
                  </button>
                  <button type="button" class="btn btn-warning" (click)="actualizar()" *ngIf="accion == 'UPD'">
                      <span *ngIf="cargando && accion == 'UPD'" class="spinner-border  spinner-border-sm" role="status" aria-hidden="true"></span>
                      Actualizar
                  </button>
                  <button type="button" class="btn btn-danger" (click)="mostrarFormulario(false, 'LST')">
                    Cancelar
                  </button>
                </div>
              </form>
          </div>
        </div>
      </div>

    </div>
</div>
  