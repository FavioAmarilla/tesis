<div class="row">
    <div class="col-md-12">

        <div class="card" *ngIf="!form">
            <div class="card-header">
                <button class="btn btn-primary" (click)="mostrarProducto(true, 'INS', true)">Agregar</button>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table">
                        <thead class="text-primary">
                            <th>
                                Descripci贸n
                            </th>
                            <th>
                                Cod. Barras
                            </th>
                            <th>
                                Precio Unitario
                            </th>
                            <th>
                                Precio Venta
                            </th>
                            <th class="text-right">
                                Opciones
                            </th>
                        </thead>
                        <tbody>
                            <tr *ngFor="let row of listaProductos | paginate: { itemsPerPage: porPagina, currentPage: paginaActual, totalItems: total }">
                                <td>
                                    {{ row.descripcion }}
                                </td>
                                <td>
                                    {{ row.codigo_barras }}
                                </td>
                                <td>
                                    {{ row.costo_unitario }}
                                </td>
                                <td>
                                    {{ row.precio_venta }}
                                </td>
                                <td class="text-right">
                                    <button class="btn btn-sm btn-warning" (click)="obtenerProducto(row.identificador)"><i class="fas fa-edit"></i></button> &nbsp;
                                    <button class="btn btn-sm btn-danger"><i class="fas fa-times"></i></button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <div *ngIf="!cargando && !form && accion == 'LST'">
                      <app-paginacion (actualizarPagina)="paginacion($event)" [datos]="barrio" [porPagina]="porPagina" [total]="total"></app-paginacion>
                    </div>
                    <div class="row justify-content-center align-items-center col-md-12">
                      <span *ngIf="cargando && !form && accion == 'LST'" class="spinner-border spinner-border-lg spinner-table" role="status" aria-hidden="true"></span>
                    </div>
                </div>
            </div>
        </div>

        <div class="card" *ngIf="form">
            <div class="card-body">
                <div class="table-responsive">
                    <form>
                        <div class="form-group">
                            <label for="image">Imagen</label>

                            <div *ngIf="producto && producto.archivo_img">
                                <img src="{{url + '/producto/getImage/' + producto.archivo_img}}" width="100" height="100">
                            </div>

                            <angular-file-uploader [config]="fileUploaderConfig" [resetUpload]=resetVar
                                (ApiResponse)="subirImagen($event)">
                            </angular-file-uploader>
                        </div>
                        <div class="form-group">
                            <label for="descripcion">Descripci贸n</label>
                            <input type="text" class="form-control" placeholder="Descripci贸n" name="descripcion" [(ngModel)]="producto.descripcion">
                        </div>
                        <div class="form-group">
                            <label for="vr_unidad_medida">Unidad de medida</label>
                            <select name="vr_unidad_medida" id="vr_unidad_medida" class="form-control" [(ngModel)]="producto.vr_unidad_medida">
                                <option value="" disabled selected>Seleccione una unidad de medida</option>
                                <option value="UN">Unidad</option>
                                <option value="KG">Kilogramo</option>
                                <option value="ME">Metro</option>
                                <option value="LI">Litros</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="costo_unitario">Costo unitario</label>
                            <input type="text" class="form-control" placeholder="Costo unitario" name="costo_unitario" [(ngModel)]="producto.costo_unitario">
                        </div>
                        <div class="form-group">
                            <label for="precio_venta">Precio Venta</label>
                            <input type="text" class="form-control" placeholder="Precio venta" name="precio_venta" [(ngModel)]="producto.precio_venta">
                        </div>
                        <div class="form-group">
                            <label for="id_tipo_impuesto">Tipo de impuesto</label>
                            <select name="id_tipo_impuesto" id="id_tipo_impuesto" class="form-control" [(ngModel)]="producto.id_tipo_impuesto">
                                <option value="" disabled selected>Seleccione el tipo de impuesto</option>
                                <option *ngFor="let impuesto of listaImpuestos" value="{{impuesto.identificador}}">{{impuesto.descripcion}}</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="id_linea">Linea del producto</label>
                            <select name="id_linea" id="id_linea" class="form-control" [(ngModel)]="producto.id_linea">
                                <option value="" disabled selected>Seleccione la linea del producto</option>
                                <option *ngFor="let linea of listaLineas" value="{{linea.identificador}}">{{linea.descripcion}}</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <button type="button" id="generateBarcode" class="btn btn-primary" (click)="generarCodigoBarras()">Generar c贸digo de barras</button>
                        </div>
                        <div class="form-group">
                            <input type="hidden" class="form-control" name="codigo_barras" [(ngModel)]="producto.codigo_barras">
                            <svg id="barcode"></svg>
                        </div>
                        <div class="form-group">
                            <button type="button" class="btn btn-success" (click)="registrar()" *ngIf="accion == 'INS'">
                                <span *ngIf="cargando && accion == 'INS'" class="spinner-border  spinner-border-sm" role="status" aria-hidden="true"></span>
                                Guardar
                            </button>
                            <button type="button" class="btn btn-warning" (click)="actualizar()" *ngIf="accion == 'UPD'">
                                <span *ngIf="cargando && accion == 'UPD'" class="spinner-border  spinner-border-sm" role="status" aria-hidden="true"></span>
                                Actualizar
                            </button>
                            <button type="button" class="btn btn-danger" (click)="mostrarProducto(false, 'LST')">
                              Cancelar
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

    </div>
</div>