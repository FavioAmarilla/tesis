<app-header [cargando]="cargando"></app-header>

<ion-content>
  <nav aria-label="breadcrumb" *ngIf="producto">
    <ol class="breadcrumb">
      <div class="container d-flex">
        <li class="breadcrumb-item"><a [routerLink]="['/']">INICIO</a></li>
        <li class="breadcrumb-item"><a [routerLink]="['/producto/linea',  producto.linea_producto.slug]">{{ producto.linea_producto.descripcion }}</a></li>
        <li class="breadcrumb-item active" aria-current="page">{{ producto.descripcion }} </li>
      </div>
    </ol>
  </nav>

  <section class="ftco-section" *ngIf="producto">
    <div class="container">
      <div class="row">

        <div class="col-md-6">
          <div class="panel panel-default product-image border">
            <img *ngIf="producto" class="img-fluid" [src]="producto.imagen | productImage | urlSanitizer">
          </div>
        </div>

        <div class="col-md-6">
          <div class="panel panel-default product-details border">
            <h5 class="h5">{{ producto.descripcion }}</h5>
            <p class="mb-0">Código de barras: {{ producto.codigo_barras }}</p>
            <span class="price"> {{ producto.precio_venta | numberFormat}} <span class="gs">Gs</span> </span>
            <hr>

            <div class="row mt-4">
              <div class="w-100"></div>
              <div class="form-group input-group col-md-6 d-flex mb-3">
                <div class="input-group-prepend">
                  <span class="input-group-text" id="basic-addon2" (click)="asignarCantidad('DI')">
                    <ion-icon name="remove"></ion-icon>
                  </span>
                </div>
                <input type="text" name="cantidad" class="form-control" min="1" max="100" [(ngModel)]="cantidad" disabled>
                <div class="input-group-append">
                  <span class="input-group-text" id="basic-addon2" (click)="asignarCantidad('AU')">
                    <ion-icon name="add"></ion-icon>
                  </span>
                </div>
              </div>
              <div class="w-100"></div>
            </div>
            <p><a [routerLink]="null" class="btn btn-primary py-2 px-3" (click)="agregarAlCarrito()">Añadir al Carrito</a></p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="ftco-section" *ngIf="!producto && !cargando">
    <h1>No se encontro el Producto</h1>
  </section>

  <section class="ftco-section">
    <hr>
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-md-12 heading-section text-center">
          <h3 class="mb-4 h3">Productos Relacionados</h3>
        </div>
      </div>
    </div>
    <div class="container" *ngIf="relacionados.length">
      <div class="row">
        <div class="col-md-6 col-lg-3" *ngFor="let relacionado of relacionados">
          <cp-producto [producto]="relacionado"></cp-producto>
        </div>
      </div>
    </div>

    <div class="container" *ngIf="!relacionados.length">
      <div class="row">
        <div class="col-md-12">
          <h4>No se encontraron productos relacionados</h4>
        </div>
      </div>
    </div>
  </section>

  <app-footer></app-footer>

</ion-content>